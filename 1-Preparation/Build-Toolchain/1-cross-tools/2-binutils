# Cross-Tools: Binutils
# Build & install as user lfs

# Create build directory in-tree
mkdir -v build && cd build

# Set the build options
export  CARGS="--prefix=/cross-tools "
export CARGS+="--target=${LFS_TGT} "
export CARGS+="--with-sysroot=/cross-tools "
export CARGS+="--disable-nls "
export CARGS+="--disable-werror "
export CARGS+="--enable-gprofng=no "
export CARGS+="--enable-new-dtags "
export CARGS+="--enable-default-hash-style=gnu "
export CARGS+="--enable-deterministic-archives "
export CARGS+="--disable-compressed-debug-sections "
export CARGS+="--disable-bootstrap "
export CARGS+="--enable-relro "
export CARGS+="--enable-default-pie "
export CARGS+="--enable-static-pie "
export CARGS+="--disable-linker-build-id "
export CARGS+="--disable-multilib "

# Configure source
../configure $CARGS

# Build to check host can build
make configure-host

# Build
make all-binutils all-gas all-ld

# Install to /cross-tools
make install-strip-binutils install-strip-gas install-strip-ld
