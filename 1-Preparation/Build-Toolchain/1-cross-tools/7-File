# Cross-Tools: File
# Build and install as lfs

# Set the build options
export  CARGS="--disable-libseccomp "
export CARGS+="--host=$(./config.guess) "
export CARGS+="--target=${LFS_TGT} "

# Configure source
CC=${LFS_TGT}-gcc \
./configure --prefix=/cross-tools $CARGS

# Build and install
make && make install

## Next, the 32-bit build

# Clean up
make distclean

# Set the build options
export  CARGS="--disable-libseccomp "
export CARGS+="--host=i686-pc-linux-gnu "
export CARGS+="--target=${LFS_TGT32} "
export CARGS+="--libdir=/cross-tools/lib32 "

# Configure source
CC="${LFS_TGT}-gcc -m32"  \
./configure --prefix=/cross-tools $CARGS

# Compile
make

# Install
make DESTDIR=$PWD/DESTDIR install
cp -Rv DESTDIR/cross-tools/lib32/* /cross-tools/lib32
rm -rf DESTDIR

# Remove harmful libtool archives
rm -v /cross-tools/lib{,32}/*.la
