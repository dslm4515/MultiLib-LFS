# Chroot: Toolchain - Clean Up (optional)
# This section is done in Chroot environment

# The steps in this section are optional, but if the LFS
# partition is rather small, it is beneficial to learn
# that unnecessary items can be removed.

# Remove the documentation:
rm -rf /tools/{,share}/{info,man,doc}

# Remove unneeded files:
find /tools/{lib,libexec} -name \*.la -delete

# The executables and libraries built so far contain
# about 54 MB of unneeded debugging symbols.
# Remove those symbols with:
find /tools/bin -maxdepth 1 -type f -exec /tools/x86_64-lfs-linux-gnu/bin/strip  --strip-debug {} \;
strip --strip-debug /tools/lib/python3.14/lib-dynload/*.so

# Avoid stripping the libraries used by the
# cross-compiled strip & bash binaries when stripping
# debug symbols in /tools/lib:
for b in $(ls /tools/lib)
do
  case $b in
       libbfd* | libsframe* | libncursesw* | libc.so* | ld-linux* | ld-lsb* | *.json | *.py )
            echo "> skipped ${b} "
       ;;
       * )
           echo "stripped $b " && /tools/bin/strip --strip-debug /tools/lib/$b
       ;;
  esac
done

# To save more space (~9 MB), remove the unnecessary 
# python IDE
rm -rf /tools/bin/idle*
rm -rf /tools/lib/python3.14/idlelib
rm -rf /tools/lib/python3.14/tkinter

# NOTE: If you intend to keep the temporary tools for
# use in building future LFS systems, now is the time
# to back them up. Subsequent commands in next stage
# will alter the tools currently in place, rendering
# them useless for future builds.

# NOTE: If also building LFS with a package manager
# now is the time to start building that pacakge 
# manager and it's dependacies.
