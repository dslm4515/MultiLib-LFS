# Tools: Binutils Pass 2
# Build & install as LFS

# Create a separate build directory again: 
mkdir -v build
cd       build

# Set the build options
export  CARGS="--prefix=/tools "
export CARGS+="--host=$LFS_TGT "
export CARGS+="--build=$(../config.guess) "
export CARGS+="--with-lib-path=/tools/lib:/tools/lib32 "
export CARGS+="--enable-64-bit-bfd "
export CARGS+="--enable-gprofng=no "
export CARGS+="--enable-new-dtags "
export CARGS+="--enable-default-hash-style=gnu "
export CARGS+="--enable-shared "
export CARGS+="--with-sysroot "
export CARGS+="--disable-nls "
export CARGS+="--disable-werror "

# Configure the source
CC=$LFS_TGT-gcc         \
AR=$LFS_TGT-ar          \
RANLIB=$LFS_TGT-ranlib  \
../configure $CARGS

# Compile
make

# Install
make install

# Now prepare the linker for the “Re-adjusting” phase 
# later on:
make -C ld clean
make -C ld LIB_PATH=/usr/lib:/lib:/usr/lib32:/lib32
cp -v ld/ld-new /tools/bin
